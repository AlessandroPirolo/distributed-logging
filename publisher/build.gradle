plugins {
    id("org.jetbrains.kotlin.jvm") version "1.7.10"
}

repositories {
    mavenCentral()
}

dependencies {
    implementation(platform("org.jetbrains.kotlin:kotlin-bom"))

    implementation("org.jetbrains.kotlin:kotlin-stdlib-jdk8")

    implementation("org.eclipse.paho:org.eclipse.paho.client.mqttv3:1.2.5")

    implementation("org.jetbrains.kotlinx:kotlinx-coroutines-core:1.6.4")

    implementation("com.google.protobuf:protobuf-kotlin:3.21.5")

}

task preBuildTask(type: Exec) {
    commandLine 'proto', '''--proto_path=.\\distributed-logging\\publisher\\src\\main\\protobuf
            --java_out=.\\distributed-logging\\publisher\\src\\main\\java
            --kotlin_out=.\\Documents\\GitHub\\distributed-logging\\publisher\\src\\main\\kotlin
            .\\Documents\\GitHub\\distributed-logging\\publisher\\src\\main\\protobuf\\log.proto'''
}
